<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç</title>
    <style>
        body {
            font-family: Arial;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            padding: 15px 30px;
            font-size: 16px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #status { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .connected { background: #d4edda; color: #155724; }
        .disconnected { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé§ –ì–æ–ª–æ—Å–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç "–ü—Ä–æ–ª–æ–≥"</h1>

        <div id="status" class="disconnected">
            ‚ùå –ù–µ–π—Ä–æ—Å–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–∑–∞–ø—É—Å—Ç–∏—Ç–µ LM Studio)
        </div>

        <button id="voiceBtn">üé§ –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞</button>
        <p id="statusText">–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</p>

        <div id="chat" style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; min-height: 100px;">
            <strong>–ü—Ä–æ–ª–æ–≥:</strong> –ü—Ä–∏–≤–µ—Ç! –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ.
        </div>
    </div>

    <script>
        // JavaScript –∫–æ–¥ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞
        class VoiceAssistant {
            constructor() {
                this.recognition = null;
                this.isListening = false;
                this.init();
            }

            init() {
                if ('webkitSpeechRecognition' in window) {
                    this.recognition = new webkitSpeechRecognition();
                    this.recognition.continuous = false;
                    this.recognition.interimResults = false;
                    this.recognition.lang = 'ru-RU';

                    this.recognition.onstart = () => {
                        this.isListening = true;
                        this.updateUI('üé§ –°–ª—É—à–∞—é...', true);
                    };

                    this.recognition.onresult = (event) => {
                        const command = event.results[0][0].transcript;
                        this.processCommand(command);
                    };

                    this.recognition.onend = () => {
                        this.isListening = false;
                        this.updateUI('üé§ –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞', false);
                    };

                    document.getElementById('voiceBtn').onclick = () => this.startListening();
                } else {
                    this.addMessage('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥', 'assistant');
                }
            }

            startListening() {
                if (this.recognition && !this.isListening) {
                    this.recognition.start();
                }
            }

            processCommand(command) {
                this.addMessage(command, 'user');

                if (command.includes('–ø—Ä–∏–≤–µ—Ç')) {
                    this.speak('–ü—Ä–∏–≤–µ—Ç! –†–∞–¥ –≤–∞—Å —Å–ª—ã—à–∞—Ç—å!');
                } else if (command.includes('–≤—Ä–µ–º—è')) {
                    const time = new Date().toLocaleTimeString('ru-RU');
                    this.speak(`–°–µ–π—á–∞—Å ${time}`);
                } else {
                    this.speak('–Ø –ø–æ–∫–∞ —É—á—É—Å—å. –°–∫–∞–∂–∏—Ç–µ "–ø—Ä–∏–≤–µ—Ç" –∏–ª–∏ "–≤—Ä–µ–º—è"');
                }
            }

            addMessage(text, sender) {
                const chat = document.getElementById('chat');
                const message = document.createElement('div');
                message.innerHTML = `<strong>${sender === 'user' ? '–í—ã' : '–ü—Ä–æ–ª–æ–≥'}:</strong> ${text}`;
                chat.appendChild(message);
            }

            speak(text) {
                this.addMessage(text, 'assistant');
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'ru-RU';
                    speechSynthesis.speak(utterance);
                }
            }

            updateUI(text, listening) {
                document.getElementById('statusText').textContent = text;
                document.getElementById('voiceBtn').style.background = listening ? '#dc3545' : '#4CAF50';
            }
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            window.assistant = new VoiceAssistant();
        });
    </script>
</body>
</html>